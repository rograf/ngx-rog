<table class="table table-responsive d-md-table">
  <thead>
    <tr>
      <th scope="col" *ngFor="let header of headers">
        <button *ngIf="header.sorting; else noSortingHeader" (click)="setSorting(header.key)">
          <small>
            {{header.displayName}}
          </small>
        </button>
        <ng-template #noSortingHeader>
          <div class="column-header text-capitalize">
            <small>
              {{header.displayName}}
            </small>
          </div>
        </ng-template>
      </th>
      <th style="width: 50px;" *ngIf="tableActionsTemplate"></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of rows;">
      <td *ngFor="let header of headers">

        <ng-template #defaultRow>
          <ng-container [ngSwitch]="header.type">
            <ng-container *ngSwitchCase="">
              {{getDescendantProp(row, header.key)}}
            </ng-container>
            <ng-container *ngSwitchCase="'date'">
              {{getDescendantProp(row, header.key) | date: 'short'}}
            </ng-container>
            <ng-container *ngSwitchDefault>
              {{getDescendantProp(row, header.key)}}
            </ng-container>
          </ng-container>
        </ng-template>

        <ng-container *ngTemplateOutlet="customTemplate[header.key]? customTemplate[header.key] : defaultRow; context: {
          value: getDescendantProp(row, header.key),
          header: header,
          row: row
        }">
        </ng-container>
      </td>
      <td *ngIf="tableActionsTemplate" class="text-right border-left">
        <div class="d-inline-flex align-items-center">
          <ng-container *ngTemplateOutlet="tableActionsTemplate; context: {row: row}"></ng-container>
        </div>
      </td>
    </tr>
  </tbody>
</table>